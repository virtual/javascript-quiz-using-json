{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///quiz.umd.min.js","webpack:///webpack/bootstrap 7bdd916645fe92a8707d","webpack:///./src/js/quiz.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","global","document","extend","defaults","options","assign","isValid","data","JSON","parse","e","getQuizData","url","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","getScore","answers","length","reduce","acc","val","updateScore","userAnswer","state","push","getTemplate","questions","currentQuestion","question","count","end","questionTemplate","randomiseQuestions","qs","item","temp","Math","floor","random","nextQuestion","config","currentQ","current","template","renderTemplate","id","start","bindSubmit","score","message","resultMessage","results","title","description","result","forEach","minScore","informationTemplate","infoStr","isLast","questionStr","isLastQuestion","option","index","html","existing","getElementById","remove","form","createElement","setAttribute","innerHTML","appendChild","addEventListener","event","preventDefault","target","radios","getElementsByName","parseInt","Array","from","find","r","checked","init","success","error","err","dataSource","defaultOptions","seed","seedData","then","Quiz","TEST","loadingGif","randomise","VERSION","__TEST__","window"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,sBAAAD,IAEAD,EAAA,sBAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAV,WAUA,OANAK,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,GAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KA+DA,OAnCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAG,EAAA,SAAAK,GAA2C,MAAAA,IAG3CR,EAAAS,EAAA,SAAAf,EAAAgB,EAAAC,GACAX,EAAAY,EAAAlB,EAAAgB,IACAG,OAAAC,eAAApB,EAAAgB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAX,EAAAkB,EAAA,SAAAvB,GACA,GAAAgB,GAAAhB,KAAAwB,WACA,WAA2B,MAAAxB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAK,GAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAY,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDrB,EAAAwB,EAAA,GAGAxB,IAAAyB,EAAA,KDgBM,SAAU9B,EAAQD,EAASM,GAEjC,cE7EC,SAAU0B,EAAQC,GA8BlB,QAASC,GAAOC,EAAUC,GACzB,MAAOjB,QAAOkB,UAAWF,EAAUC,GAGpC,QAASE,GAAQC,GAChB,IACCC,KAAKC,MAAMF,GACV,MAAOG,GACR,OAAO,EAER,OAAO,EAKR,QAASC,GAAYC,GACpB,MAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5B,GAAMC,GAAM,GAAIC,eAEhBD,GAAIE,KAAK,MAAON,GAChBI,EAAIG,OAAS,SAAgBZ,GACxBnC,KAAKgD,QAAU,KAAOhD,KAAKgD,OAAS,IACvCN,EAAQE,EAAIK,UAEZN,GACCK,OAAQhD,KAAKgD,OACbE,WAAYN,EAAIM,cAInBN,EAAIO,QAAU,WACbR,GACCK,OAAQhD,KAAKgD,OACbE,WAAYN,EAAIM,cAGlBN,EAAIQ,SAIN,QAASC,GAASC,GACjB,MAAIA,IAAWA,EAAQC,QAAU,EACzBD,EAAQE,OAAO,SAACC,EAAKC,GAAN,MAAcD,GAAMC,IAEnC,EAIT,QAASC,GAAYC,GACpBC,EAAMP,QAAQQ,KAAKF,GAGpB,QAASG,GAAYC,EAAWC,GAE/B,GAAIJ,EAAMK,SAASC,QAAUF,EAC5B,MAAOG,GAAIP,EAGX,IAAIK,GAAWF,EAAUC,EACzB,OAAOI,GAAiBH,EAASA,SAAUA,EAASlC,SAItD,QAASsC,GAAmBN,GAG3B,IAFA,GAAIO,GAAKP,EAAUT,OACfiB,SAAMC,SACHF,GACNC,EAAOE,KAAKC,MAAMD,KAAKE,SAAWL,KAClCE,EAAOT,EAAUO,GACjBP,EAAUO,GAAMP,EAAUQ,GAC1BR,EAAUQ,GAAQC,CAEnB,OAAOT,GAGR,QAASa,GAAahB,EAAOiB,GAC5B,GAAMd,GAAYH,EAAM1B,KAAK,GAAG6B,UAC1Be,EAAWlB,EAAMK,SAASc,QAC1BC,EAAWlB,EAAYC,EAAWe,EAExClB,GAAMK,SAASc,SAAW,EAC1BE,EAAeD,EAAUH,EAAOK,IAGjC,QAASC,GAAMjD,EAAM2C,EAAQjB,GAEzB,IAAsB,IAAlB3B,EAAQC,GAEb,WADA+C,GAAe,0EAA2EJ,EAAOK,GAIhGtB,GAAM1B,KAAOC,KAAKC,MAAMF,GAC1B0B,EAAMK,SAASC,MAAQN,EAAM1B,KAAK,GAAG6B,UAAUT,QAEvB,IAAlBuB,EAAOF,SACTf,EAAM1B,KAAOmC,EAAmBT,EAAM1B,OAGxCkD,EAAWxD,GACXgD,EAAahB,EAAOiB,GAGxB,QAASV,GAAIP,GACZ,GAAIyB,GAAQjC,EAASQ,EAAMP,SACvBiC,EAAUC,EAAcF,EAAOzB,EAAM1B,KAAK,GAAGsD,QACjD,oCAAoCF,EAAQG,MAA5C,WAA4DH,EAAQI,YAApE,kCACuBL,EADvB,eAC2CzB,EAAMK,SAASC,MAD1D,OAID,QAASqB,GAAcF,EAAOM,GAC7B,GAAIL,KAMJ,OALAK,GAAOC,QAAQ,SAAC1D,GACXmD,GAASnD,EAAK2D,WACjBP,EAAUpD,KAGLoD,EAGR,QAASQ,GAAoBC,EAASC,GACrC,gCAAiCD,EAAjC,kFACoEC,EAAS,cAAgB,iBAD7F,2BAKD,QAAS5B,GAAiB6B,EAAalE,GAEtC,GAAMmE,GAAkBtC,EAAMK,SAASC,QAAWN,EAAMK,SAASc,QAAU,EACvEC,2FAEOiB,EAFP,MAkBJ,OAdAlE,GAAUA,EAAQ6D,QAAQ,SAACO,EAAQC,GAClCpB,iHAE2DoB,EAAQ,GAFnE,mBAGKD,EAHL,yCAMInB,4CAELA,iFACKkB,EAAiB,cAAgB,QADtC,oCAUD,QAASjB,GAAeoB,EAAMnB,GAC7B,GAAMoB,GAAW1E,EAAS2E,eAAerB,EACtCoB,IACFA,EAASE,QAET,IAAMC,GAAO7E,EAAS8E,cAAc,OACrCD,GAAKE,aAAa,KAAMzB,GACxBuB,EAAKG,UAAYP,EACfzE,EAAS2E,eAAe,UAAUM,YAAYJ,GAGjD,QAASrB,GAAWxD,GACnBA,EAASkF,iBAAiB,SAAU,SAAUC,GAE7C,GADAA,EAAMC,iBACHD,EAAME,OAAO/B,KAAOL,EAAOK,GAAI,CAChC,GAAMgC,GAAStF,EAASuF,kBAAkB,aAE1CzD,GADe0D,SAASC,MAAMC,KAAKJ,GAAQK,KAAK,SAACC,EAAGpH,GAAJ,MAAU8G,GAAO9G,GAAGqH,UAAShH,QAEzEmE,EAAahB,EAAOiB,MAO5B,QAAS6C,GAAK3F,GAab,QAAS4F,GAAQzF,GAChBiD,EAAMjD,EAAM2C,EAAQjB,GAGrB,QAASgE,GAAMC,GACd,MAAO5C,8HAE0CJ,EAAOiD,WAFjD,WAGEjD,EAAOK,IAlBjBL,EAAShD,EAAOkG,EAAgBhG,IAGZ,IAAhB8C,EAAOmD,OACVnD,EAAOiD,WAAajD,EAAOoD,UAI5B3F,EAAYuC,EAAOiD,YAAYI,KAAKP,EAASC,GArN9C,GAEIO,UACAC,SACAvD,SAGAkD,GACHD,WAAY,KACZO,WAAY,KACZJ,SAAU,mBACV/C,GAAI,OACJoD,WAAW,EACXN,MAAM,GAIHpE,GACHK,UACCc,QAAS,EACTb,MAAO,GAERb,WACAnB,QA+MDkG,IACCG,QAvOe,cAwOf3E,QACA8D,OACAtC,aACAH,iBACAb,mBACA0B,sBACAP,gBACApB,MACAgB,QACAP,eACAP,qBACAP,cACAJ,cACAN,WACAd,cACAL,UACAJ,UAMDsG,EAAOxG,EAAOwG,MACbI,QA/Pe,cAgQfb,QAGDS,EAAKK,SAAWJ,GAIfK,OAAQ7G","file":"quiz.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"js-quiz-using-json\"] = factory();\n\telse\n\t\troot[\"js-quiz-using-json\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"js-quiz-using-json\"] = factory();\n\telse\n\t\troot[\"js-quiz-using-json\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n      Version: 0.5.1-alpha\n       Author: Matthew D Webb\n  Description: javascript quiz using json\n */\n(function (global, document) {\n\n\t'use strict';\n\n\tvar VERSION = '0.5.1-alpha';\n\n\tvar Quiz = void 0;\n\tvar TEST = void 0;\n\tvar config = void 0;\n\n\t// configuration for the plugin, these can be overwritten in the initialisation function:\n\tvar defaultOptions = {\n\t\tdataSource: null,\n\t\tloadingGif: null,\n\t\tseedData: './data/data.json',\n\t\tid: 'quiz',\n\t\trandomise: false,\n\t\tseed: false\n\t};\n\n\t// keeps track of the current state\n\tvar state = {\n\t\tquestion: {\n\t\t\tcurrent: 0,\n\t\t\tcount: 0\n\t\t},\n\t\tanswers: [],\n\t\tdata: {}\n\t};\n\n\tfunction extend(defaults, options) {\n\t\treturn Object.assign({}, defaults, options);\n\t}\n\n\tfunction isValid(data) {\n\t\ttry {\n\t\t\tJSON.parse(data);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t// TODO:\n\t// [1] convert to async / await\n\t// [2] make function testable (removing annoynmous functions)\n\tfunction getQuizData(url) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\txhr.open('GET', url);\n\t\t\txhr.onload = function onload(data) {\n\t\t\t\tif (this.status >= 200 && this.status < 300) {\n\t\t\t\t\tresolve(xhr.response);\n\t\t\t\t} else {\n\t\t\t\t\treject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tstatusText: xhr.statusText\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr.onerror = function onerror() {\n\t\t\t\treject({\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t\tstatusText: xhr.statusText\n\t\t\t\t});\n\t\t\t};\n\t\t\txhr.send();\n\t\t});\n\t}\n\t// FIXME: error prone.\n\tfunction getScore(answers) {\n\t\tif (answers && answers.length > -1) {\n\t\t\treturn answers.reduce(function (acc, val) {\n\t\t\t\treturn acc + val;\n\t\t\t});\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\t// TODO: refactor out.\n\tfunction updateScore(userAnswer) {\n\t\tstate.answers.push(userAnswer);\n\t}\n\n\tfunction getTemplate(questions, currentQuestion) {\n\t\t// End of Quiz?\n\t\tif (state.question.count === currentQuestion) {\n\t\t\treturn end(state);\n\t\t\t// Next Question\n\t\t} else {\n\t\t\tvar question = questions[currentQuestion];\n\t\t\treturn questionTemplate(question.question, question.options);\n\t\t}\n\t}\n\n\tfunction randomiseQuestions(questions) {\n\t\tvar qs = questions.length;\n\t\tvar item = void 0,\n\t\t    temp = void 0;\n\t\twhile (qs) {\n\t\t\titem = Math.floor(Math.random() * qs--);\n\t\t\ttemp = questions[qs];\n\t\t\tquestions[qs] = questions[item];\n\t\t\tquestions[item] = temp;\n\t\t}\n\t\treturn questions;\n\t}\n\n\tfunction nextQuestion(state, config) {\n\t\tvar questions = state.data[0].questions;\n\t\tvar currentQ = state.question.current;\n\t\tvar template = getTemplate(questions, currentQ);\n\t\t// increment current question:\n\t\tstate.question.current += 1;\n\t\trenderTemplate(template, config.id);\n\t}\n\n\tfunction start(data, config, state) {\n\n\t\tif (isValid(data) === false) {\n\t\t\trenderTemplate('<p>The JSON data provided is not valid! Please check this and retry</p>', config.id);\n\t\t\treturn;\n\t\t}\n\t\t// should be moved.\n\t\tstate.data = JSON.parse(data);\n\t\tstate.question.count = state.data[0].questions.length;\n\n\t\tif (config.random === true) {\n\t\t\tstate.data = randomiseQuestions(state.data);\n\t\t}\n\n\t\tbindSubmit(document);\n\t\tnextQuestion(state, config);\n\t}\n\n\tfunction end(state) {\n\t\tvar score = getScore(state.answers);\n\t\tvar message = resultMessage(score, state.data[1].results);\n\t\treturn '<h3>Quiz Complete</h3><h4>' + message.title + '</h4><p>' + message.description + '</p>\\n\\t\\t  <p>Your score was: ' + score + ' questions: ' + state.question.count + '</p>';\n\t}\n\n\tfunction resultMessage(score, result) {\n\t\tvar message = {};\n\t\tresult.forEach(function (data) {\n\t\t\tif (score >= data.minScore) {\n\t\t\t\tmessage = data;\n\t\t\t}\n\t\t});\n\t\treturn message;\n\t}\n\n\tfunction informationTemplate(infoStr, isLast) {\n\t\treturn '<form id=\"quizForm\"><p>' + infoStr + '</p>\\n\\t\\t\\t\\t<button id=\"nextQuestion\" type=\"submit\" class=\"btn btn-default\">' + (isLast ? \"Finish Quiz\" : \"Next Question\") + '</button>\\n\\t\\t\\t</form>';\n\t}\n\n\tfunction questionTemplate(questionStr, options) {\n\n\t\tvar isLastQuestion = state.question.count === state.question.current + 1;\n\t\tvar template = '<div id=\"quizForm\">\\n                <div>PROGRESS BAR HERE</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p>' + questionStr + '</p>';\n\n\t\toptions ? options.forEach(function (option, index) {\n\t\t\ttemplate += '<div class=\"radio\">\\n\\t\\t\\t\\t\\t<label>\\n\\t\\t\\t\\t\\t\\t<input type=\"radio\" name=\"quizAnswer\" required value=\"' + (index + 1) + '\">\\n\\t\\t\\t\\t\\t\\t' + option + '\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t</div>';\n\t\t}) : template += '<div>Error! No options provided!</div>';\n\n\t\ttemplate += '<button id=\"nextQuestion\" type=\"submit\" class=\"btn btn-default\">\\n\\t\\t\\t\\t' + (isLastQuestion ? \"Finish Quiz\" : \"Next\") + '\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>';\n\n\t\treturn template;\n\t}\n\n\t// DOM interaction\n\n\tfunction renderTemplate(html, id) {\n\t\tvar existing = document.getElementById(id);\n\t\tif (existing) {\n\t\t\texisting.remove();\n\t\t}\n\t\tvar form = document.createElement('form');\n\t\tform.setAttribute('id', id);\n\t\tform.innerHTML = html;\n\t\tdocument.getElementById('myQuiz').appendChild(form);\n\t}\n\n\tfunction bindSubmit(document) {\n\t\tdocument.addEventListener('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tif (event.target.id === config.id) {\n\t\t\t\tvar radios = document.getElementsByName('quizAnswer');\n\t\t\t\tvar answer = parseInt(Array.from(radios).find(function (r, i) {\n\t\t\t\t\treturn radios[i].checked;\n\t\t\t\t}).value);\n\t\t\t\tupdateScore(answer);\n\t\t\t\tnextQuestion(state, config);\n\t\t\t}\n\t\t});\n\t}\n\n\t// INITIALISE THE QUIZ:\n\n\tfunction init(options) {\n\n\t\t// extend all default options, (config is internally accessible):\n\t\tconfig = extend(defaultOptions, options);\n\n\t\t// will allow the quiz to be run with seed example data:\n\t\tif (config.seed === true) {\n\t\t\tconfig.dataSource = config.seedData;\n\t\t}\n\n\t\t// get json\n\t\tgetQuizData(config.dataSource).then(success, error);\n\n\t\tfunction success(data) {\n\t\t\tstart(data, config, state);\n\t\t}\n\n\t\tfunction error(err) {\n\t\t\treturn renderTemplate('<p>Sorry, we are unable to retrieve the data for this quiz.</p>\\n\\t\\t\\t\\t\\t<small>Try checking the dateSource provided: ' + config.dataSource + '</small>', config.id);\n\t\t}\n\t}\n\n\t// --------------------------------------------------------------------//\n\t// ----------------- PRIVATE API (TESTING ONLY) -----------------------//\n\t// --------------------------------------------------------------------//\n\tTEST = {\n\t\tVERSION: VERSION,\n\t\tstate: state,\n\t\tinit: init,\n\t\tbindSubmit: bindSubmit,\n\t\trenderTemplate: renderTemplate,\n\t\tquestionTemplate: questionTemplate,\n\t\tinformationTemplate: informationTemplate,\n\t\tresultMessage: resultMessage,\n\t\tend: end,\n\t\tstart: start,\n\t\tnextQuestion: nextQuestion,\n\t\trandomiseQuestions: randomiseQuestions,\n\t\tgetTemplate: getTemplate,\n\t\tupdateScore: updateScore,\n\t\tgetScore: getScore,\n\t\tgetQuizData: getQuizData,\n\t\tisValid: isValid,\n\t\textend: extend\n\t};\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------------- PUBLIC API -------------------------//\n\t// --------------------------------------------------------------------//\n\tQuiz = global.Quiz = {\n\t\tVERSION: VERSION,\n\t\tinit: init\n\t};\n\n\tQuiz.__TEST__ = TEST;\n\n\treturn Quiz;\n})(window, document);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// quiz.umd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7bdd916645fe92a8707d","/*\n      Version: 0.5.1-alpha\n       Author: Matthew D Webb\n  Description: javascript quiz using json\n */\n(function (global, document) {\n\n\t'use strict';\n\n\tconst VERSION = '0.5.1-alpha';\n\n\tlet Quiz;\n\tlet TEST;\n\tlet config;\n\n\t// configuration for the plugin, these can be overwritten in the initialisation function:\n\tlet defaultOptions = {\n\t\tdataSource: null,\n\t\tloadingGif: null,\n\t\tseedData: './data/data.json',\n\t\tid: 'quiz',\n\t\trandomise: false,\n\t\tseed: false\n\t};\n\n  // keeps track of the current state\n\tlet state = {\n\t\tquestion: {\n\t\t\tcurrent: 0,\n\t\t\tcount: 0\n\t\t},\n\t\tanswers: [],\n\t\tdata: {}\n\t};\n\n\tfunction extend(defaults, options) {\n\t\treturn Object.assign({}, defaults, options);\n\t}\n\n\tfunction isValid(data) {\n\t\ttry {\n\t\t\tJSON.parse(data);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n  // TODO:\n\t// [1] convert to async / await\n\t// [2] make function testable (removing annoynmous functions)\n\tfunction getQuizData(url) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst xhr = new XMLHttpRequest();\n\n\t\t\txhr.open('GET', url);\n\t\t\txhr.onload = function onload(data) {\n\t\t\t\tif (this.status >= 200 && this.status < 300) {\n\t\t\t\t\tresolve(xhr.response);\n\t\t\t\t} else {\n\t\t\t\t\treject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tstatusText: xhr.statusText\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr.onerror = function onerror() {\n\t\t\t\treject({\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t\tstatusText: xhr.statusText\n\t\t\t\t});\n\t\t\t};\n\t\t\txhr.send();\n\t\t});\n\t}\n        // FIXME: error prone.\n\tfunction getScore(answers) {\n\t\tif (answers && answers.length > -1) {\n\t\t\treturn answers.reduce((acc, val) => acc + val);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n  // TODO: refactor out.\n\tfunction updateScore(userAnswer) {\n\t\tstate.answers.push(userAnswer);\n\t}\n\n\tfunction getTemplate(questions, currentQuestion) {\n\t\t// End of Quiz?\n\t\tif (state.question.count === currentQuestion) {\n\t\t\treturn end(state);\n\t\t// Next Question\n\t\t} else {\n\t\t\tlet question = questions[currentQuestion];\n\t\t\treturn questionTemplate(question.question, question.options);\n\t\t}\n\t}\n\n\tfunction randomiseQuestions(questions) {\n\t\tlet qs = questions.length;\n\t\tlet item, temp;\n\t\twhile (qs) {\n\t\t\titem = Math.floor(Math.random() * qs--);\n\t\t\ttemp = questions[qs];\n\t\t\tquestions[qs] = questions[item];\n\t\t\tquestions[item] = temp;\n\t\t}\n\t\treturn questions;\n\t}\n\n\tfunction nextQuestion(state, config) {\n\t\tconst questions = state.data[0].questions;\n\t\tconst currentQ = state.question.current;\n\t\tconst template = getTemplate(questions, currentQ);\n\t\t// increment current question:\n\t\tstate.question.current += 1;\n\t\trenderTemplate(template, config.id);\n\t}\n\n\tfunction start(data, config, state) {\n\n\t    if (isValid(data) === false) {\n\t\t\t\trenderTemplate('<p>The JSON data provided is not valid! Please check this and retry</p>', config.id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// should be moved.\n\t    state.data = JSON.parse(data);\n\t\t\tstate.question.count = state.data[0].questions.length;\n\n\t    if (config.random === true) {\n\t     \tstate.data = randomiseQuestions(state.data);\n\t    }\n\n\t    bindSubmit(document);\n\t    nextQuestion(state, config);\n\t}\n\n\tfunction end(state) {\n\t\tlet score = getScore(state.answers);\n\t\tlet message = resultMessage(score, state.data[1].results);\n\t\treturn `<h3>Quiz Complete</h3><h4>${message.title}</h4><p>${message.description}</p>\n\t\t  <p>Your score was: ${score} questions: ${state.question.count}</p>`;\n\t}\n\n\tfunction resultMessage(score, result) {\n\t\tlet message = {};\n\t\tresult.forEach((data) => {\n\t\t\tif (score >= data.minScore) {\n\t\t\t\tmessage = data;\n\t\t\t}\n\t\t});\n\t\treturn message;\n\t}\n\n\tfunction informationTemplate(infoStr, isLast) {\n\t\treturn `<form id=\"quizForm\"><p>${infoStr}</p>\n\t\t\t\t<button id=\"nextQuestion\" type=\"submit\" class=\"btn btn-default\">${isLast ? \"Finish Quiz\" : \"Next Question\" }</button>\n\t\t\t</form>`;\n\t}\n\n\tfunction questionTemplate(questionStr, options) {\n\n\t\tconst isLastQuestion = (state.question.count === (state.question.current + 1));\n\t\tvar template = `<div id=\"quizForm\">\n                <div>PROGRESS BAR HERE</div>\n\t\t\t\t\t\t\t\t<p>${questionStr}</p>`;\n\n\t\toptions ? options.forEach((option, index) => {\n\t\t\ttemplate += `<div class=\"radio\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type=\"radio\" name=\"quizAnswer\" required value=\"${index + 1}\">\n\t\t\t\t\t\t${option}\n\t\t\t\t\t</label>\n\t\t\t\t</div>`;\n\t\t}) : template += `<div>Error! No options provided!</div>`;\n\n\t\ttemplate += `<button id=\"nextQuestion\" type=\"submit\" class=\"btn btn-default\">\n\t\t\t\t${ isLastQuestion ? \"Finish Quiz\" : \"Next\" }\n\t\t\t\t</button>\n\t\t\t</div>`;\n\n\t\treturn template;\n\t}\n\n\t// DOM interaction\n\n\tfunction renderTemplate(html, id) {\n\t\tconst existing = document.getElementById(id);\n\t\tif(existing) {\n\t\t\texisting.remove();\n\t\t}\n\t \tconst form = document.createElement('form');\n\t\tform.setAttribute('id', id);\n\t\tform.innerHTML = html;\n    document.getElementById('myQuiz').appendChild(form);\n\t}\n\n\tfunction bindSubmit(document) {\n\t\tdocument.addEventListener('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tif(event.target.id === config.id) {\n\t\t\t\t\tconst radios = document.getElementsByName('quizAnswer');\n\t\t\t\t\tconst answer = parseInt(Array.from(radios).find((r, i) => radios[i].checked).value);\n\t\t\t\t\tupdateScore(answer);\n        \tnextQuestion(state, config);\n\t\t\t}\n\t\t});\n\t}\n\n\t// INITIALISE THE QUIZ:\n\n\tfunction init(options) {\n\n\t\t// extend all default options, (config is internally accessible):\n\t\tconfig = extend(defaultOptions, options);\n\n\t\t// will allow the quiz to be run with seed example data:\n\t\tif (config.seed === true) {\n\t\t\tconfig.dataSource = config.seedData;\n\t\t}\n\n\t\t// get json\n\t\tgetQuizData(config.dataSource).then(success, error);\n\n\t\tfunction success(data) {\n\t\t\tstart(data, config, state);\n\t\t}\n\n\t\tfunction error(err) {\n\t\t\treturn renderTemplate(\n\t\t\t\t`<p>Sorry, we are unable to retrieve the data for this quiz.</p>\n\t\t\t\t\t<small>Try checking the dateSource provided: ${config.dataSource}</small>`\n        \t\t, config.id);\n\t\t}\n\t}\n\n\t// --------------------------------------------------------------------//\n\t// ----------------- PRIVATE API (TESTING ONLY) -----------------------//\n\t// --------------------------------------------------------------------//\n\tTEST = {\n\t\tVERSION,\n\t\tstate,\n\t\tinit,\n\t\tbindSubmit,\n\t\trenderTemplate,\n\t\tquestionTemplate,\n\t\tinformationTemplate,\n\t\tresultMessage,\n\t\tend,\n\t\tstart,\n\t\tnextQuestion,\n\t\trandomiseQuestions,\n\t\tgetTemplate,\n\t\tupdateScore,\n\t\tgetScore,\n\t\tgetQuizData,\n\t\tisValid,\n\t\textend\n\t};\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------------- PUBLIC API -------------------------//\n\t// --------------------------------------------------------------------//\n\tQuiz = global.Quiz = {\n\t\tVERSION,\n\t\tinit\n\t};\n\n\tQuiz.__TEST__ = TEST;\n\n\treturn Quiz;\n\n}(window, document));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/quiz.js"],"sourceRoot":""}